<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Data Day - Kids Chore Tracker</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Roboto', sans-serif;
      margin: 0;
      padding: 0;
      background: #fafafa;
    }

    h2 {
      text-align: center;
      margin: 1rem 0;
      color: #333;
      font-weight: 500;
    }

    /* Tabs */
    .tab-container {
      display: flex;
      justify-content: center;
      background: #444;
      border-bottom: 2px solid #ccc;
    }
    .tab {
      flex: 1;
      padding: 14px;
      text-align: center;
      color: #fff;
      cursor: pointer;
      font-weight: 500;
      border-right: 1px solid #666;
    }
    .tab.active {
      background: #666;
    }

    /* Table */
    .table-container {
      display: none;
      padding: 1rem;
    }
    .table-container.active {
      display: block;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 1rem;
      background: #fff;
      border: 1px solid #ddd;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: center;
      font-size: 14px;
      width: calc(100% / 8);
    }
    th {
      background: #f2f2f2;
      font-weight: 500;
    }
    td:first-child {
      text-align: left;
      font-weight: 500;
    }
    input[type="number"] {
      width: 60px;
      border: none;
      background: transparent;
      text-align: center;
      font-family: 'Roboto', sans-serif;
    }
    input[type="checkbox"] {
      transform: scale(1.2);
    }

    /* Progress bar */
    .progress {
      background: #eee;
      border-radius: 6px;
      overflow: hidden;
      height: 22px;
      width: 100%;
      border: 1px solid #ddd;
      margin-top: 8px;
    }
    .progress-bar {
      background: #4caf50;
      height: 100%;
      transition: width 0.3s ease;
      text-align: center;
      font-size: 12px;
      color: #fff;
      line-height: 22px;
      font-weight: 500;
    }

    /* Icons above labels */
    .icon-label {
      display: flex;
      flex-direction: column;
      align-items: center;
      font-size: 12px;
      color: #333;
    }
    .icon-label svg {
      width: 18px;
      height: 18px;
      margin-bottom: 2px;
      fill: #444;
    }

    /* Mobile */
    @media (max-width: 600px) {
      table, th, td {
        font-size: 11px;
      }
      input[type="number"] {
        width: 45px;
      }
    }
  </style>
</head>
<body>

  <h2>Kids Chore Tracker</h2>

  <!-- Tabs -->
  <div class="tab-container">
    <div class="tab active" data-kid="Ryan">Ryan</div>
    <div class="tab" data-kid="Jack">Jack</div>
    <div class="tab" data-kid="Henry">Henry</div>
    <div class="tab" data-kid="Sonny">Sonny</div>
  </div>

  <!-- Tables -->
  <div id="Ryan" class="table-container active"></div>
  <div id="Jack" class="table-container"></div>
  <div id="Henry" class="table-container"></div>
  <div id="Sonny" class="table-container"></div>

  <script>
    const kids = ["Ryan", "Jack", "Henry", "Sonny"];
    const days = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"];
    const chores = [
      { key: "showerTeeth", label: "Shower/Teeth", icon: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zM18 16v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5S10.5 3.17 10.5 4v.68C7.63 5.36 6 7.92 6 11v5l-1.99 2H20l-2-2z"/></svg>` },
      { key: "bedRoom", label: "Bed/Room", icon: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 10V7c0-1.1-.9-2-2-2H8C6.9 5 6 5.9 6 7v3H2v9h2v-2h16v2h2v-9h-4zM8 7h8v3H8V7z"/></svg>` },
      { key: "clothes", label: "Clothes", icon: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.12 4.37 15 3H9L7.88 4.37 5 5.5V21h14V5.5l-2.88-1.13z"/></svg>` },
      { key: "other", label: "Other", icon: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/></svg>` }
    ];

    const CHORE_VALUE = 0.25;
    const MINUTE_VALUE = 0.05;

    // Build tables
    kids.forEach(kid => {
      const container = document.getElementById(kid);
      let html = `<h3>${kid}'s Week</h3><table><thead>
        <tr>
          <th>Day</th>
          ${chores.map(c => `<th><div class="icon-label">${c.icon}<span>${c.label}</span></div></th>`).join("")}
          <th><div class="icon-label">ðŸ“–<span>Reading</span></div></th>
          <th><div class="icon-label">ðŸŽµ<span>Practice</span></div></th>
          <th><div class="icon-label">ðŸ’ª<span>Workout</span></div></th>
        </tr>
      </thead><tbody>`;

      days.forEach((day, i) => {
        html += `<tr>
          <td>${day}</td>
          ${chores.map(c => `<td><input type="checkbox" data-kid="${kid}" data-day="${i}" data-type="${c.key}"></td>`).join("")}
          <td><input type="number" min="0" data-kid="${kid}" data-day="${i}" data-type="reading"></td>
          <td><input type="number" min="0" data-kid="${kid}" data-day="${i}" data-type="practice"></td>
          <td><input type="number" min="0" data-kid="${kid}" data-day="${i}" data-type="workout"></td>
        </tr>`;
      });

      html += `<tr><th>Total</th>
        ${chores.map(c => `<td id="${kid}-${c.key}-total">0/7</td>`).join("")}
        <td id="${kid}-reading-total">0</td>
        <td id="${kid}-practice-total">0</td>
        <td id="${kid}-workout-total">0</td>
      </tr>`;

      html += `</tbody></table>
        <div class="progress"><div id="${kid}-progress" class="progress-bar"> $0.00 </div></div>`;
      container.innerHTML = html;
    });

    // Load saved data
    function loadData() {
      kids.forEach(kid => {
        const data = JSON.parse(localStorage.getItem(kid)) || {};
        days.forEach((day, i) => {
          [...chores.map(c => c.key), "reading", "practice", "workout"].forEach(type => {
            const input = document.querySelector(`[data-kid="${kid}"][data-day="${i}"][data-type="${type}"]`);
            if (input) {
              if (chores.some(c => c.key === type)) {
                input.checked = data[`${i}-${type}`] || false;
              } else {
                input.value = data[`${i}-${type}`] || "";
              }
            }
          });
        });
        updateTotals(kid);
      });
    }

    // Save
    function saveData(kid) {
      const data = {};
      days.forEach((day, i) => {
        [...chores.map(c => c.key), "reading", "practice", "workout"].forEach(type => {
          const input = document.querySelector(`[data-kid="${kid}"][data-day="${i}"][data-type="${type}"]`);
          if (input) {
            if (chores.some(c => c.key === type)) {
              data[`${i}-${type}`] = input.checked;
            } else {
              data[`${i}-${type}`] = input.value;
            }
          }
        });
      });
      localStorage.setItem(kid, JSON.stringify(data));
      updateTotals(kid);
    }

    // Totals + money
    function updateTotals(kid) {
      let totalChores = 0, maxChores = days.length * chores.length;
      let readingTotal = 0, practiceTotal = 0, workoutTotal = 0;

      chores.forEach(c => {
        let count = 0;
        days.forEach((day, i) => {
          const box = document.querySelector(`[data-kid="${kid}"][data-day="${i}"][data-type="${c.key}"]`);
          if (box && box.checked) {
            count++;
            totalChores++;
          }
        });
        document.getElementById(`${kid}-${c.key}-total`).textContent = `${count}/7`;
      });

      days.forEach((day, i) => {
        ["reading", "practice", "workout"].forEach(type => {
          const input = document.querySelector(`[data-kid="${kid}"][data-day="${i}"][data-type="${type}"]`);
          if (input && input.value) {
            if (type === "reading") readingTotal += parseInt(input.value) || 0;
            if (type === "practice") practiceTotal += parseInt(input.value) || 0;
            if (type === "workout") workoutTotal += parseInt(input.value) || 0;
          }
        });
      });

      document.getElementById(`${kid}-reading-total`).textContent = readingTotal;
      document.getElementById(`${kid}-practice-total`).textContent = practiceTotal;
      document.getElementById(`${kid}-workout-total`).textContent = workoutTotal;

      const money = (totalChores * CHORE_VALUE) +
                    ((readingTotal + practiceTotal + workoutTotal) * MINUTE_VALUE);

      const percent = Math.min(100, Math.round((money / 20) * 100));
      const bar = document.getElementById(`${kid}-progress`);
      bar.style.width = percent + "%";
      bar.textContent = "$" + money.toFixed(2);
    }

    document.body.addEventListener("input", e => {
      if (e.target.dataset.kid) saveData(e.target.dataset.kid);
    });
    document.body.addEventListener("change", e => {
      if (e.target.dataset.kid) saveData(e.target.dataset.kid);
    });

    // Tabs
    document.querySelectorAll(".tab").forEach(tab => {
      tab.addEventListener("click", () => {
        document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));
        document.querySelectorAll(".table-container").forEach(c => c.classList.remove("active"));
        tab.classList.add("active");
        document.getElementById(tab.dataset.kid).classList.add("active");
      });
    });

    loadData();
  </script>
</body>
</html>
